#!/bin/bash

# Locate GPS device
sudo ./GPS_locator

#Locate DIGIRIG device
sudo ./Digirig_locator

# Install NTP and GPSd
sudo ./GPSD_install

# Build/install hamlib

sudo apt-get install autoconf automake libtool -y

git clone https://github.com/Hamlib/Hamlib.git
cd Hamlib
./bootstrap
./configure
make
sudo make install


# Build/install direwolf

cd /home/shell/Programs
sudo apt-get install git build-essential libasound2-dev libudev-dev alsa-utils rsyslog logrotate libgps-dev cmake libavahi-common-dev libavahi-client-dev -y

git clone http://github.com/wb2osz/direwolf
cd direwolf
mkdir build && cd build
cmake ..
make -j4
sudo make install

# install sound card

RULES_FILE="/etc/modprobe.d/alsa-base.conf"
PNAME_STR='options snd_usb_audio index=0,1 vid=0x0d8c pid=0x0012'

if grep -Fxq "$PNAME_STR" "$RULES_FILE"; then
	echo "No changes to alsa-base.conf required."
else
	echo "$PNAME_STR" >> "$RULES_FILE"
	echo "alsa-base.conf updated with:"
	echo "$PNAME_STR"
fi

echo "############"
echo "REBOOT NOW"
